% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sccomp_test_community.R
\name{sccomp_test_community}
\alias{sccomp_test_community}
\title{Test Community-Level Mean-Variability Association}
\usage{
sccomp_test_community(
  .data,
  contrasts = NULL,
  prob_threshold = 0.95,
  pass_fit = TRUE
)
}
\arguments{
\item{.data}{A tibble. The result of sccomp_estimate.}

\item{contrasts}{A vector of character strings. For example if your formula is
\code{~ 0 + treatment} and the factor treatment has values \code{yes} and \code{no}, your
contrast could be "contrasts = c(treatmentyes - treatmentno)".}

\item{prob_threshold}{A real between 0 and 1. Posterior probability threshold
for determining significance (default 0.95).}

\item{pass_fit}{A boolean. Whether to pass the Stan fit as attribute in the output.
Because the Stan fit can be very large, setting this to FALSE can be used to
lower the memory imprint to save the output.}
}
\value{
A tibble (\code{tbl}) with the following columns:
\itemize{
\item parameter - The parameter from the design matrix (e.g., "(Intercept)", "DiseaseStateCRC")
\item component - Component number (1 or 2) for bimodal models; not present for single models
\item factor - The covariate factor in the formula, if applicable
\item v_intercept_lower - Lower (2.5\%) quantile of community-level variability intercept
\item v_intercept_effect - Mean of posterior distribution for community intercept
\item v_intercept_upper - Upper (97.5\%) quantile of community-level variability intercept
\item v_intercept_prob_gt_0 - Posterior probability that intercept > 0
\item v_intercept_prob_lt_0 - Posterior probability that intercept < 0
\item v_intercept_prob_direction - max(prob_gt_0, prob_lt_0)
\item v_intercept_direction - "increase", "decrease", or "none"
\item v_intercept_significant - TRUE if prob_direction > prob_threshold
\item v_slope_lower - Lower (2.5\%) quantile of community-level variability slope
\item v_slope_effect - Mean of posterior distribution for community slope
\item v_slope_upper - Upper (97.5\%) quantile of community-level variability slope
\item v_slope_prob_gt_0 - Posterior probability that slope > 0
\item v_slope_prob_lt_0 - Posterior probability that slope < 0
\item v_slope_prob_direction - max(prob_gt_0, prob_lt_0)
\item v_slope_direction - "increase", "decrease", or "none"
\item v_slope_significant - TRUE if prob_direction > prob_threshold
\item rhat_intercept, ess_bulk_intercept, ess_tail_intercept - Convergence diagnostics for intercept
\item rhat_slope, ess_bulk_slope, ess_tail_slope - Convergence diagnostics for slope
}
}
\description{
This function tests community-level mean-variability association
from a sccomp result. It extracts and analyzes the relationship between mean
abundance and variability across all cell groups.
}
\examples{
\donttest{
  if (instantiate::stan_cmdstan_exists()) {
    data("counts_obj")

    estimates = sccomp_estimate(
      counts_obj,
      ~ 0 + type, ~1, "sample", "cell_group", "count",
      cores = 1
    ) |>
    sccomp_test_community()
  }
}

}
